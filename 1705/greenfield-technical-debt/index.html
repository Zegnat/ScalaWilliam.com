<!DOCTYPE html>
<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="content-type">

    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,700,900%7CRoboto+Mono" rel="stylesheet">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/prism/1.6.0/themes/prism.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.5.13/clipboard.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.6.0/prism.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.6.0/plugins/toolbar/prism-toolbar.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.6.0/plugins/toolbar/prism-toolbar.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.6.0/components/prism-java.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.6.0/components/prism-scala.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.6.0/themes/prism-okaidia.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.6.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>
    <style type="text/css">
    body {
        font-family: 'Roboto', sans-serif;
        line-height:1.6;
        color:rgb(5,5,5);
        background:rgb(255,255,255);
        max-width:60em;
    }
        code {
            font-family: 'Roboto Mono', monospace;
        }
        header {
            padding-bottom: 1em;
        }
        header pre {
            border:2px solid;
            border-color: firebrick;
            text-align: center;
            padding:0.6em;
            overflow-x:scroll;
        }
        header code {
            font-size:1.6em;
            font-weight:bold;
        }
        ul {
            list-style-type: square;
        }
                a {
            color:darkslategrey;
        }
        a:hover {
            color:darkslateblue;
        }

        .token.operator {
        background:none;
        }


             nav button {
                box-shadow: 0 0 0 1px rgba(0,0,0,.15) inset,0 0 6px rgba(0,0,0,.2) inset;
    font-family: inherit;
    font-size: 100%;
    padding: .5em 1em;
    color: #444;
    border: 1px solid #999;
    border: 0 rgba(0,0,0,0);
    background-color: #E6E6E6;
    text-decoration: none;
    border-radius: 2px;
        }
        nav.hide ul {
            display:none;
        }
nav ul {
            list-style-type: none;
        }
nav li:before {
            content: "- ";
        }
figure {
    display:inline-block;
  text-align: center;
  font-style: italic;
  font-size: smaller;
  text-indent: 0;
  border: thin silver solid;
    box-shadow: 1px 1px 3px black;
  margin: 0.5em;
  padding: 0.5em;
}
.clear { clear:both; }
    </style>


    <title>How I deal with greenfield technical debt</title>

<meta name="twitter:title" content="How I deal with greenfield technical debt">
<meta property="og:title" content="How I deal with greenfield technical debt">
<meta property="og:url" content="/1705/greenfield-technical-debt">
<link rel="canonical" href="/1705/greenfield-technical-debt">
<!-- http://ogp.me/ -->
<meta property="og:type" content="article">
<meta property="article:published_time" content="2017-05-05">
<meta property="article:modified_time" content="2017-05-05">
<meta property="og:description" content="William Narmontas describes how he deals with greenfield technical debt.">
<meta itemprop="description" content="William Narmontas describes how he deals with greenfield technical debt.">
<meta name="description" content="William Narmontas describes how he deals with greenfield technical debt.">
<meta name="twitter:description" content="William Narmontas describes how he deals with greenfield technical debt.">
<meta property="og:site_name" content="Scala William">
<link rel="author" href="https://plus.google.com/u/0/103489630517643950426/">
<link rel="publisher" href="https://plus.google.com/u/0/103489630517643950426/">
<meta itemprop="name" content="Why Scala didn't miss the Android opportunity">
<meta property="og:image" content="https://avatars2.githubusercontent.com/u/2464813">
<meta itemprop="image" content="https://avatars2.githubusercontent.com/u/2464813">
<meta name="twitter:image" content="https://avatars2.githubusercontent.com/u/2464813">
<meta name="author" content="William Narmontas">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@ScalaWilliam">
</head>
<body>
  <article class="h-entry">
    <header>
      <h1>How I deal with greenfield technical debt</h1>
      <h2>By <a href="/" class="u-author h-card">William Narmontas</a>, <time class="dt-published" datetime="2017-05-05T10:47:11.753Z">May 5, 2017</time></h2>
      <p>This page can be <a href="https://github.com/ScalaWilliam/ScalaWilliam.com/blob/master/1705/greenfield-technical-debt/index.html">edited on GitHub</a>.</p>
      <p>Original article at <a href="https://medium.com/@ScalaWilliam/how-i-deal-with-greenfield-technical-debt-1a35be33dc71" class="u-syndication">Medium</a>.</p>
    </header>
    <section class="e-content">
        <p>Firstly, let’s get out of the way the definition of “technical debt”.<br>Here’s what I know about it:</p>
        <ul>
            <li>Technical debt is mostly associated with <a href="https://www.joelonsoftware.com/2009/09/23/the-duct-tape-programmer/" target="_blank">duct-tape programming</a> and a focus on short-term outcomes.</li>
            <li>Technical debt is also a result of <a href="http://www.codesimplicity.com/post/what-is-overengineering/" target="_blank">over-engineering</a> and a focus on long-term growth, albeit less frequently acknowledged.</li>
            <li>Technical debt is not only about code, it’s also about architecture.</li>
        </ul>
        <p>From this, therefore, I’d like to define it as:</p>
        <blockquote>Technical debt is any technical choice that hampers the <a href="https://training.kalzumeus.com/newsletters/archive/sources_of_revenue_growth" target="_blank">short-term and long-term growth</a> of a business.</blockquote>
        <h3>Introduction</h3>
        <p>We’ll go through the relationship between technical debt and planning, prototyping, testing, validation and discipline. We shall learn how each of these things affects the end result.</p>
        <h3>Determining viability</h3>
        <p>“<a href="https://medium.com/@johnpcutler/7-abilities-you-must-defend-and-improve-c1fe18ab62b5" target="_blank">The <em>right</em> way to scale your company</a>” begins with learning and validation.</p>
        <p>We’ll assume that your client is interested in <a href="http://www.mindtheproduct.com/2013/09/validate-or-die-using-validation-to-build-the-right-product/" target="_blank">validating his idea</a>. If he isn’t, he’s either already very rich because of his genius — or he’s simply gambling. He’ll also know that <a href="https://www.quora.com/Why-are-software-development-task-estimations-regularly-off-by-a-factor-of-2-3/answer/Michael-Wolfe?srid=DB6V" target="_blank">the map doesn’t tell you everything about the terrain</a>. In my experience, in most cases there <a href="https://medium.com/wardleymaps/finding-a-path-cdb1249078c0" target="_blank">isn’t even a map</a>, which is exhibited in poor planning, vague and wobbly requirements, anaemic specification, plenty <a href="/1612/limit-degrees-of-freedom">degrees of freedom</a>, ill-fitting implementation, technical debt, crappy execution, and consequently — failure.</p>
        <blockquote>Technical debt is a symptom, not a cause.</blockquote>
        <p>Determining <a href="https://medium.com/@johnpcutler/dr-obvious-startup-validation-and-failure-63709d1779ec" target="_blank">viability is an experiment</a>. An experiment starts with a hypothesis and rewards the client with the competitive advantage of information. Learning it sooner means he’s able to act faster, and thus succeed.</p>
        <p>The experiment begins with non-technical steps and once it’s made it far enough, technical solutions will be needed.</p>
        <p>This is where you as an engineer come in.</p>
        <h4>Note on validation</h4>
        <p>Validation is for the masters of the trade. You have to figure out the right metrics and success acceptance criteria. It <em>is</em> difficult to do because of distractions. Always reconnect <a href="https://medium.com/@johnpcutler/completed-validated-or-valuable-8d75363748f5" target="_blank">to your end goals</a>.</p>
        <p>I’m experimenting with this on my non-profit <a href="http://git.work/" target="_blank">Git Work</a> project. I must say, it’s not easy, especially that like most people, I’m used to doing rather than thinking. Example is starting your project by writing code and not exploring the competition.</p>
        <h3>The Prototype</h3>
        <p><em>Could also be a proof of concept (POC) or minimum viable product (MVP).</em> <a href="https://www.quora.com/Invention-and-Inventions-What-is-the-difference-between-a-proof-of-concept-and-a-prototype/answer/Pujan-Srivastava?srid=DB6V" target="_blank"><em>See explanation.</em></a></p>
        <p>The client needs a prototype to further his experiment. Perhaps he wants to show it to potential users. But this experiment requires some realistic live data processing and may benefit from a message queue rather than a database.</p>
        <p>I’ll create a file with some events, called <code>/log/file</code>, and an app called <code>experimental-app</code> that reads from <a href="https://en.wikipedia.org/wiki/Standard_streams#Standard_input_.28stdin.29" target="_blank">standard input</a>. This is enough to <a href="/most-important-streaming-abstraction/">support more advanced streaming in the future</a>. To append a message to the queue, I do <code>echo message &gt;&gt; /log/file</code>, and to process messages live, I do <code>tail -f /log/file | experimental-app</code>. The web developer can append messages to the log from PHP without having to ever know about Kafka/RabbitMQ connection strings and SSL certificates. I place it on a cheap VPS and hand it off to the client. Job done, first iteration complete.</p>
        <p>Technical debt..? Only if you’re wicked enough to take this into production… so, <strong>absolutely not</strong>!</p>
        <h4>Note on testing</h4>
        <p>Even at prototype stage, you may need to debug code. Given that in many cases, debugging is in both short- and long-term a <a href="http://codebetter.com/jeremymiller/2006/06/01/tdd-and-debugging/" target="_blank">lesser alternative to test-driven development</a>, I will actually write tests so long as they work in my advantage in producing a prototype quickly. This typically means at least a few unit tests. It’s <a href="https://dev.to/scalawilliam/unit-testing-is-simple" target="_blank">not as hard as you think</a>.</p>
        <h3>Plan</h3>
        <p>Being a good citizen, you explicitly note down a bunch of issues on JIRA or in the README of the project: “No automated deployment, cannot scale beyond manual deployment”, “No proper message queue, cannot scale beyond 1 server”, etc. These can be called bugs and now you can do <a href="https://blogs.oracle.com/toddfast/entry/bug_driven_development" target="_blank">bug-driven development</a>.</p>
        <p>You move on happily knowing you didn’t waste 2 days of the client’s time giving them a RabbitMQ cluster (whoop de doo…), an event processing framework and an automated deployment pipeline, should the result be anything other than “great, let’s continue exactly in the path we were going”. It may turn out that what you thought as an issue is not an issue after all, too: good on you for acting on it, but not prematurely solving it. For example, you find out that you didn’t need to shard your data after all when your client updates you with the exact data rates.</p>
        <p>When you take a shortcut, you <strong>must</strong> document it: “it is not scalable right now”. Do not hide this critical information. Make sure this is in the Issue system, so that the client is aware of how much work there is left in making the system production-worthy.</p>
        <h3>Fix when appropriate</h3>
        <p>When the time is ready, your client knows that there are scaling hurdles like lack of automated deployment. Make sure he knows the cost of solving the problem at the wrong time — I’ve had a project manager spend 8 months on the front-end and then give 2 weeks for a back-end that needed 3 months, causing a huge delay and I think financial penalty. Make sure that every time you solve a problem, he can tell the difference. Simplest measurement is how long it takes to respond to a change. It is easier to do when you work incrementally.</p>
        <p>It’s simply not technical debt if it doesn’t slow down the business. Pretty code is not be-all and end-all, it’s only a means to an end.</p>
        <p>Now that the core solution is delivered, work can be done against it to make it production worthy, iteratively and in tandem with the key solution. No more crazy separation between development, ops, testing and design: they all work on the same repository, same issue tracker system.</p>
        <p>To keep the core lean and mean, extract generic bits where and when appropriate, hand them off to specialists to improve.</p>
        <p>If you do not tackle these technical debts in time, you’re heading for the ruins. But if you tackle them prematurely, you’re also heading for a disaster of building an unfit platform, which is an even more painful choice to undo. This is why <a href="http://timperrett.com/2016/11/12/frameworks-are-fundimentally-broken/" target="_blank">some developers are completely against frameworks</a>. For example, using Kafka to achieve scalability when the data rates are under 50k messages/second — and the user is a data scientist and not a developer— this forces creation of extra layers.</p>
        <h3>Preventing retrofitting</h3>
        <p>When invested in a choice, we tend to rationalise through cognitive dissonance. I’ve faced many cases where an engineering team will over-engineer a platform and resist attempts to solve problems outside of it. It’s hard to abandon a baby you’ve nurtured for so long.</p>
        <blockquote>When asked to process a 10MB CSV file, you spent 1 day writing a distributed Hadoop job that fits into your framework.</blockquote>
        <blockquote>Your competitor spent 30 minutes on a 20-line awk script to do the same. <a href="https://brenocon.com/blog/2009/09/dont-mawk-awk-the-fastest-and-most-elegant-big-data-munging-language/" target="_blank">Don’t mawk the awk</a>.</blockquote>
        <p>When the platform is over-engineered, so is the solution. And <strong>this</strong> is technical debt. They created a platform from the problem rather than from the solution. They tackled the distributed problem without a basis.</p>
        <blockquote>Rely on what you <strong>know</strong> rather on what you <strong>think you know</strong>.</blockquote>
        <p>This of course includes the knowledge that you simply “don’t know” things.</p>
        <p>And of course, let’s face it: doing stand-ups doesn’t make you agile.</p>
        <h3>Scale</h3>
        <p>At some point your client will have enough proof for the value of this project or product. Now you begin scaling the system and its parts — put in proper engineering, robustness, consider all of the edge cases.</p>
        <h4>Refactor the hacks</h4>
        <figure>
            <img src="dont-be-like-this.jpeg">
            <figcaption>Don’t be like this</figcaption>
        </figure>
        <p>Now that you’ve got a hacky awk solution with tests, you won’t have <a href="http://i.imgur.com/Z0zcMYs.gifv" target="_blank">to refactor without tests</a> and <a href="https://www.symphonious.net/2006/03/22/refactoring-without-tests/" target="_blank">walk on</a> a tightrope. You can be certain that your second and further iterations will be noticeably better than your first iteration. Having tests lets you change your architecture while keeping individual bits working — you obtain that much more confidence in moving with agility in your market.</p>
        <h4>Converge</h4>
        <p>As your audience expands, your system converges into perfection and scalability. At this point what was new becomes old and stable.</p>
        <p>Opportunity opens up for new ideas, you hack them into the existing system without affecting existing users too much. When appropriate, you slice parts off into new systems, applications and services so you can continue scaling and iterating responsively. You’re keeping short-term and long-term in mind, at all times.</p>
        <blockquote>Technical debt fades out of existence.</blockquote>
        <blockquote>You and your client designed it that way.</blockquote>
        <h3>How I learned this</h3>
        <p>I learned this through pain in developing and delivering software in many commercial settings and also <a href="https://actionfps.com/" target="_blank">a non-commercial product</a>.</p>
        <h4>How I continue learning this</h4>
        <p>I know there’s still a <a href="/1704/certifications-im-considering">lot to learn</a>, and also a lot to write :-). The path for me is still untrodden. I must focus on the user’s needs more than mine. There’s a lot that’s not been said in this article so I may write something later.</p>
        <p>I seek out allies who welcome such a process or have their own already. If you enjoyed this article you may be one of them, so keep in touch and do send me message if you want to talk.</p>
        <h3>Conclusion</h3>
        <p>We learned how to be appropriate and disciplined at every stage of the process, including how to take intentional shortcuts that won’t bite as “technical debt” neither in the future nor in the present. We looked at tests, creating documentation, scaling up, not solving problems premature, and always staying on track.</p>
        <h4>Keep in touch</h4>
        <ul>
            <li>Connect with me on <a href="https://www.linkedin.com/in/scalawilliam/" target="_blank">LinkedIn (William Vykintas Narmontas; just mention my article)</a>.</li>
            <li>Follow on <a href="https://twitter.com/ScalaWilliam" target="_blank">Twitter (William Narmontas @ScalaWilliam</a>).</li>
            <li>Look at my website <a href="/">ScalaWilliam.com</a>.</li>
            <li>Or subscribe to <a href="https://plus.google.com/collection/oFuHlB" target="_blank">Scala William’s content</a>.</li>
        </ul>
        <h4>Thanks</h4>
        <ul>
            <li>To <a href="https://medium.com/@swardley" target="_blank">swardley</a> for his <a href="https://twitter.com/wardleymaps/status/860136527581597696" target="_blank">feedback</a>, which helped me refine the “Scale” section of the article.</li>
            <li>To <a href="https://www.linkedin.com/in/burtchensu/" target="_blank">Burt Chen</a> for his feedback, which includes adding examples and illustrations.</li>
            <li>To <a href="https://twitter.com/_hhandoko" target="_blank">Herdy Handoko</a> for his feedback, which connects the sections better.</li>
            <li>To all the people I’ve worked with and learned from :-).</li>
        </ul>
    </section>
</article>
</body>
</html>
